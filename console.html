<!DOCTYPE html><html id=maincontent><head><meta charset=UTF-8><link rel=stylesheet href=css/api.css></head><body class="alt apidoc" id=api-section-console><div id=content class=clearfix><div id=column2 class=interior><div id=intro class=interior><a href=http://nodejs.cn/ >Node.js 中文网</a><div><input placeholder="API 快速搜索" id=search_input></div></div><ul><li><a class=nav-assert href=assert.html>assert - 断言</a></li><li><a class=nav-buffer href=buffer.html>Buffer - 缓冲器</a></li><li><a class=nav-child_process href=child_process.html>child_process - 子进程</a></li><li><a class=nav-cluster href=cluster.html>cluster - 集群</a></li><li><a class=nav-console href=console.html>console - 控制台</a></li><li><a class=nav-crypto href=crypto.html>crypto - 加密</a></li><li><a class=nav-dgram href=dgram.html>dgram - 数据报</a></li><li><a class=nav-dns href=dns.html>dns - 域名服务器</a></li><li><a class=nav-errors href=errors.html>Error - 异常</a></li><li><a class=nav-events href=events.html>events - 事件</a></li><li><a class=nav-fs href=fs.html>fs - 文件系统</a></li><li><a class=nav-globals href=globals.html>global - 全局变量</a></li><li><a class=nav-http href=http.html>http - HTTP</a></li><li><a class=nav-https href=https.html>https - HTTPS</a></li><li><a class=nav-modules href=modules.html>module - 模块</a></li><li><a class=nav-net href=net.html>net - 网络</a></li><li><a class=nav-os href=os.html>os - 操作系统</a></li><li><a class=nav-path href=path.html>path - 路径</a></li><li><a class=nav-process href=process.html>process - 进程</a></li><li><a class=nav-querystring href=querystring.html>querystring - 查询字符串</a></li><li><a class=nav-readline href=readline.html>readline - 逐行读取</a></li><li><a class=nav-repl href=repl.html>repl - 交互式解释器</a></li><li><a class=nav-stream href=stream.html>stream - 流</a></li><li><a class=nav-string_decoder href=string_decoder.html>string_decoder - 字符串解码器</a></li><li><a class=nav-timers href=timers.html>timer - 定时器</a></li><li><a class=nav-tls href=tls.html>tls - 安全传输层</a></li><li><a class=nav-tty href=tty.html>tty - 终端</a></li><li><a class=nav-url href=url.html>url - 网址</a></li><li><a class=nav-util href=util.html>util - 实用工具</a></li><li><a class=nav-v8 href=v8.html>v8 - V8引擎</a></li><li><a class=nav-vm href=vm.html>vm - 虚拟机</a></li><li><a class=nav-zlib href=zlib.html>zlib - 压缩</a></li></ul><div class=line></div><ul><li><a class=nav--api-documentation-documentation_stability_index href=documentation.html>试验的API</a></li><li><a class=nav-async_hooks href=async_hooks.html>async_hooks</a></li><li><a class=nav-http2 href=http2.html>http2</a></li><li><a class=nav-inspector href=inspector.html>inspector</a></li><li><a class=nav-n-api href=n-api.html>napi</a></li></ul><div class=line></div><ul><li><a class=nav-documentation href=documentation.html>关于本文档</a></li><li><a class=nav-synopsis href=synopsis.html>用法与例子</a></li><li><a class=nav-addons href=addons.html>C++插件</a></li><li><a class=nav-cli href=cli.html>命令行选项</a></li><li><a class=nav-debugger href=debugger.html>debugger调试器</a></li><li><a class=nav-intl href=intl.html>国际化</a></li><li><a class=nav-tracing href=tracing.html>事件跟踪</a></li></ul></div><div id=column1 class="vs interior" data-id=console><div id=apicontent><h1 id=console>Console</h1><blockquote><p>稳定性: 2</p></blockquote><p><code>console</code> 模块提供了一个简单的调试控制台，类似于 Web 浏览器提供的 JavaScript 控制台。</p><p>该模块导出了两个特定的组件：</p><ul><li>一个 <code>Console</code> 类，包含 <code>console.log()</code> 、 <code>console.error()</code> 和 <code>console.warn()</code> 等方法，可以被用于写入到任何 Node.js 流。</li><li>一个全局的 <code>console</code> 实例，可被用于写入到 <a href=process.html#process_process_stdout><code>process.stdout</code></a> 和 <a href=process.html#process_process_stderr><code>process.stderr</code></a>。 全局的 <code>console</code> 使用时无需调用 <code>require(&#39;console&#39;)</code>。</li></ul><p>注意：全局的 console 对象的方法既不总是同步的（如浏览器中类似的 API），也不总是异步的（如其他 Node.js 流）。 详见 <a href=process.html#process_a_note_on_process_i_o>进程 I/O</a>。</p><p>例子，使用全局的 <code>console</code>：</p><pre><code class=lang-js>console.log(&#39;你好世界&#39;);
// 打印: &#39;你好世界&#39;到 stdout。
console.log(&#39;你好%s&#39;, &#39;世界&#39;);
// 打印: &#39;你好世界&#39;到 stdout。
console.error(new Error(&#39;错误信息&#39;));
// 打印: [Error: 错误信息]到 stderr。

const name = &#39;描述&#39;;
console.warn(`警告${name}`);
// 打印: &#39;警告描述&#39;到 stderr。
</code></pre><p>例子，使用 <code>Console</code> 类：</p><pre><code class=lang-js>const out = getStreamSomehow();
const err = getStreamSomehow();
const myConsole = new console.Console(out, err);

myConsole.log(&#39;你好世界&#39;);
// 打印: &#39;你好世界&#39;到 out。
myConsole.log(&#39;你好%s&#39;, &#39;世界&#39;);
// 打印: &#39;你好世界&#39;到 out。
myConsole.error(new Error(&#39;错误信息&#39;));
// 打印: [Error: 错误信息]到 err。

const name = &#39;描述&#39;;
myConsole.warn(`警告${name}`);
// 打印: &#39;警告描述&#39;到 err。
</code></pre><h2 id=class-console>Class: Console</h2><p><code>Console</code> 类可用于创建一个具有可配置的输出流的简单记录器，可以通过 <code>require(&#39;console&#39;).Console</code> 或 <code>console.Console</code> 使用：</p><pre><code class=lang-js>const { Console } = require(&#39;console&#39;);
</code></pre><pre><code class=lang-js>const { Console } = console;
</code></pre><h3 id=new-console-stdout-stderr->new Console(stdout[, stderr])</h3><ul><li><code>stdout</code> {Writable}</li><li><code>stderr</code> {Writable}</li></ul><p>通过传入一个或两个可写流实例，创建一个新的 <code>Console</code> 对象。 <code>stdout</code> 是一个可写流，用于打印日志或输出信息。 <code>stderr</code> 用于输出警告或错误。 如果没有传入 <code>stderr</code> ，则警告或错误输出会被发送到 <code>stdout</code> 。</p><pre><code class=lang-js>const output = fs.createWriteStream(&#39;./stdout.log&#39;);
const errorOutput = fs.createWriteStream(&#39;./stderr.log&#39;);
// 自定义的简单记录器
const logger = new Console(output, errorOutput);
// 像 console 一样使用
const count = 5;
logger.log(&#39;count: %d&#39;, count);
// stdout.log 中打印: count 5
</code></pre><p>全局的 <code>console</code> 是一个特殊的 <code>Console</code> 实例，它的输出会发送到 <a href=process.html#process_process_stdout><code>process.stdout</code></a> 和 <a href=process.html#process_process_stderr><code>process.stderr</code></a>。 相当于调用：</p><pre><code class=lang-js>new Console(process.stdout, process.stderr);
</code></pre><h3 id=console-assert-value-message-args->console.assert(value[, message][, ...args])</h3><ul><li><code>value</code> {any}</li><li><code>message</code> {any}</li><li><code>...args</code> {any}</li></ul><p>一个简单的断言测试，验证 <code>value</code> 是否为真。 如果不为真，则抛出 <code>AssertionError</code>。 如果提供了 <code>message</code>，则使用 <a href=util.html#util_util_format_format_args><code>util.format()</code></a> 格式化并作为错误信息使用。</p><pre><code class=lang-js>console.assert(true, &#39;does nothing&#39;);
// 通过
console.assert(false, &#39;Whoops %s&#39;, &#39;didn\&#39;t work&#39;);
// AssertionError: Whoops didn&#39;t work
</code></pre><p>注意：Node.js 中的 <code>console.assert()</code> 方法与<a href=https://developer.mozilla.org/en-US/docs/Web/API/console/assert>在浏览器中</a>的 <code>console.assert()</code> 方法的实现是不一样的。</p><p>具体地说，在浏览器中，用非真的断言调用 <code>console.assert()</code> 会导致 <code>message</code> 被打印到控制台但不会中断后续代码的执行。 而在 Node.js 中，非真的断言会导致抛出 <code>AssertionError</code>。</p><p>可以通过扩展 Node.js 的 <code>console</code> 并重写 <code>console.assert()</code> 方法来实现与浏览器中类似的功能。</p><p>例子，创建一个简单的模块，并扩展与重写了 Node.js 中 <code>console</code> 的默认行为。</p><pre><code class=lang-js>&#39;use strict&#39;;

// 用一个新的不带补丁的 assert 实现来创建一个简单的 console 扩展。
const myConsole = Object.create(console, {
  assert: {
    value: function assert(assertion, message, ...args) {
      try {
        console.assert(assertion, message, ...args);
      } catch (err) {
        console.error(err.stack);
      }
    },
    configurable: true,
    enumerable: true,
    writable: true,
  },
});

module.exports = myConsole;
</code></pre><p>然后可以用来直接替换内置的 console：</p><pre><code class=lang-js>const console = require(&#39;./myConsole&#39;);
console.assert(false, &#39;会打印这个消息，但不会抛出错误&#39;);
console.log(&#39;这个也会打印&#39;);
</code></pre><h3 id=console-clear->console.clear()</h3><p>当 <code>stdout</code> 是一个 TTY 时，调用 <code>console.clear()</code> 将尝试清除 TTY。 当 <code>stdout</code> 不是一个TTY时，该方法什么都不做。</p><p><em>注意</em>：<code>console.clear()</code> 的具体行为可能因操作系统和终端类型而异。 对于大多数Linux操作系统，<code>console.clear()</code> 与 <code>clear</code> shell 命令行为类似。 在Windows上，<code>console.clear()</code> 将只清除当前终端视图中Node.js二进制文件的输出。</p><h3 id=console-count-label->console.count([label])</h3><ul><li><code>label</code> {string} 计数器的显示标签。 默认为 <code>&#39;default&#39;</code>。</li></ul><p>维护一个指定 <code>label</code> 的内部计数器并且输出到 <code>stdout</code> 指定 <code>label</code> 调用 <code>console.count()</code> 的次数。</p><pre><code class=lang-js>&gt; console.count()
default: 1
undefined
&gt; console.count(&#39;default&#39;)
default: 2
undefined
&gt; console.count(&#39;abc&#39;)
abc: 1
undefined
&gt; console.count(&#39;xyz&#39;)
xyz: 1
undefined
&gt; console.count(&#39;abc&#39;)
abc: 2
undefined
&gt; console.count()
default: 3
undefined
&gt;
</code></pre><h3 id=console-countreset-label-default->console.countReset([label = &#39;default&#39;])</h3><ul><li><code>label</code> {string} 计数器的显示标签。 默认为 <code>&#39;default&#39;</code>。</li></ul><p>重置指定 <code>label</code> 的内部计数器。</p><pre><code class=lang-js>&gt; console.count(&#39;abc&#39;);
abc: 1
undefined
&gt; console.countReset(&#39;abc&#39;);
undefined
&gt; console.count(&#39;abc&#39;);
abc: 1
undefined
&gt;
</code></pre><h3 id=console-dir-obj-options->console.dir(obj[, options])</h3><ul><li><code>obj</code> {any}</li><li><code>options</code> {Object}<ul><li><code>showHidden</code> {boolean}</li><li><code>depth</code> {number}</li><li><code>colors</code> {boolean}</li></ul></li></ul><p>在 <code>obj</code> 上使用 <a href=util.html#util_util_inspect_object_options><code>util.inspect()</code></a> 并打印结果字符串到 <code>stdout</code>。 该函数会绕过任何定义在 <code>obj</code> 上的自定义的 <code>inspect()</code> 函数。 可选的 <code>options</code> 对象可以传入用于改变被格式化的字符串：</p><ul><li><p><code>showHidden</code> - 如果为 <code>true</code>，则该对象中的不可枚举属性和 symbol 属性也会显示。默认为 <code>false</code>。</p></li><li><p><code>depth</code> - 告诉 <a href=util.html#util_util_inspect_object_options><code>util.inspect()</code></a> 函数当格式化对象时要递归多少次。 这对于检查较大的复杂对象很有用。 默认为 <code>2</code>。 设为 <code>null</code> 可无限递归。</p></li><li><p><code>colors</code> - 如果为 <code>true</code>，则输出会带有 ANSI 颜色代码。 默认为 <code>false</code>。 颜色是可定制的，详见<a href=util.html#util_customizing_util_inspect_colors>定制 <code>util.inspect()</code> 颜色</a>。</p></li></ul><h3 id=console-error-data-args->console.error([data][, ...args])</h3><ul><li><code>data</code> {any}</li><li><code>...args</code> {any}</li></ul><p>打印到 <code>stderr</code>，并带上换行符。 可以传入多个参数，第一个参数作为主要信息，其他参数作为类似于 printf(3) 中的代替值（参数都会传给 <a href=util.html#util_util_format_format_args><code>util.format()</code></a>）。</p><pre><code class=lang-js>const code = 5;
console.error(&#39;error #%d&#39;, code);
// 打印: error #5 到 stderr
console.error(&#39;error&#39;, code);
// 打印: error 5 到 stderr
</code></pre><p>如果在第一个字符串中没有找到格式化元素（如 <code>%d</code>），则在每个参数上调用 <a href=util.html#util_util_inspect_object_options><code>util.inspect()</code></a> 并将结果字符串值拼在一起。 详见 <a href=util.html#util_util_format_format_args><code>util.format()</code></a>。</p><h3 id=console-group-label->console.group([...label])</h3><ul><li><code>label</code> {any}</li></ul><p>Increases indentation of subsequent lines by two spaces.</p><p>If one or more <code>label</code>s are provided, those are printed first without the additional indentation.</p><h3 id=console-groupcollapsed->console.groupCollapsed()</h3><p>An alias for [<code>console.group()</code>][].</p><h3 id=console-groupend->console.groupEnd()</h3><p>Decreases indentation of subsequent lines by two spaces.</p><h3 id=console-info-data-args->console.info([data][, ...args])</h3><ul><li><code>data</code> {any}</li><li><code>...args</code> {any}</li></ul><p><code>console.info()</code> 函数是 <a href=#console_console_log_data_args><code>console.log()</code></a> 的一个别名。</p><h3 id=console-log-data-args->console.log([data][, ...args])</h3><ul><li><code>data</code> {any}</li><li><code>...args</code> {any}</li></ul><p>打印到 <code>stdout</code>，并带上换行符。 可以传入多个参数，第一个参数作为主要信息，其他参数作为类似于 printf(3) 中的代替值（参数都会传给 <a href=util.html#util_util_format_format_args><code>util.format()</code></a>）。</p><pre><code class=lang-js>const count = 5;
console.log(&#39;count: %d&#39;, count);
// 打印: count: 5 到 stdout
console.log(&#39;count:&#39;, count);
// 打印: count: 5 到 stdout
</code></pre><p>详见 <a href=util.html#util_util_format_format_args><code>util.format()</code></a>。</p><h3 id=console-time-label->console.time(label)</h3><ul><li><code>label</code> {string}</li></ul><p>启动一个定时器，用以计算一个操作的持续时间。 定时器由一个唯一的 <code>label</code> 标识。 当调用 <a href=#console_console_timeend_label><code>console.timeEnd()</code></a> 时，可以使用相同的 <code>label</code> 来停止定时器，并以毫秒为单位将持续时间输出到 <code>stdout</code>。 定时器持续时间精确到亚毫秒。</p><h3 id=console-timeend-label->console.timeEnd(label)</h3><ul><li><code>label</code> {string}</li></ul><p>停止之前通过调用 <a href=#console_console_time_label><code>console.time()</code></a> 启动的定时器，并打印结果到 <code>stdout</code>：</p><pre><code class=lang-js>console.time(&#39;100-elements&#39;);
for (let i = 0; i &lt; 100; i++) {}
console.timeEnd(&#39;100-elements&#39;);
// 打印 100-elements: 225.438ms
</code></pre><p>注意：从 Node.js v6.0.0 开始，<code>console.timeEnd()</code> 删除了计时器以避免泄漏。 在旧版本上，计时器依然保留。 它允许 <code>console.timeEnd()</code> 可以多次调用同一标签。 此功能是非计划中的，不再被支持。</p><h3 id=console-trace-message-args->console.trace([message][, ...args])</h3><ul><li><code>message</code> {any}</li><li><code>...args</code> {any}</li></ul><p>打印字符串 <code>&#39;Trace :&#39;</code> 到 <code>stderr</code> ，并通过 <a href=util.html#util_util_format_format_args><code>util.format()</code></a> 格式化消息与堆栈跟踪在代码中的当前位置。</p><pre><code class=lang-js>console.trace(&#39;Show me&#39;);
// 打印: (堆栈跟踪会根据被调用的跟踪的位置而变化)
//  Trace: Show me
//    at repl:2:9
//    at REPLServer.defaultEval (repl.js:248:27)
//    at bound (domain.js:287:14)
//    at REPLServer.runBound [as eval] (domain.js:300:12)
//    at REPLServer.&lt;anonymous&gt; (repl.js:412:12)
//    at emitOne (events.js:82:20)
//    at REPLServer.emit (events.js:169:7)
//    at REPLServer.Interface._onLine (readline.js:210:10)
//    at REPLServer.Interface._line (readline.js:549:8)
//    at REPLServer.Interface._ttyWrite (readline.js:826:14)
</code></pre><h3 id=console-warn-data-args->console.warn([data][, ...args])</h3><ul><li><code>data</code> {any}</li><li><code>...args</code> {any}</li></ul><p>The <code>console.warn()</code> function is an alias for <a href=#console_console_error_data_args><code>console.error()</code></a>.</p></div></div></div></body><script src=js/all.js></script></html>